<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Settings - PayMe 2D Gateway</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
        }

        .navbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .navbar h1 {
            font-size: 22px;
        }

        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .page-header {
            margin-bottom: 30px;
        }

        .page-header h2 {
            font-size: 28px;
            color: #333;
            margin-bottom: 10px;
        }

        .page-header p {
            color: #666;
            font-size: 15px;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
        }

        .settings-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .card-icon.upi {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .card-icon.bank {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }

        .card-icon.crypto {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .card-icon.card {
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
        }

        .card-title h3 {
            font-size: 20px;
            color: #333;
            margin-bottom: 5px;
        }

        .card-title p {
            font-size: 13px;
            color: #666;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 14px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 15px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn-save {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }

        .btn-save:hover {
            opacity: 0.9;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
        }

        .status-badge.active {
            background: #d1fae5;
            color: #065f46;
        }

        .status-badge.inactive {
            background: #fee2e2;
            color: #991b1b;
        }

        .info-box {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            font-size: 13px;
            color: #666;
        }

        .info-box i {
            color: #667eea;
            margin-right: 8px;
        }

        .saved-details {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .saved-details h4 {
            font-size: 14px;
            color: #333;
            margin-bottom: 10px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: #666;
            font-size: 13px;
        }

        .detail-value {
            color: #333;
            font-weight: 600;
            font-size: 13px;
        }

        .btn-back {
            display: inline-block;
            padding: 10px 20px;
            background: white;
            color: #667eea;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .btn-back:hover {
            background: #f0f4ff;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <h1>💳 PayMe 2D Gateway</h1>
        <div>
            <span id="userName">Client Dashboard</span>
        </div>
    </div>

    <div class="container">
        <a href="client-dashboard.html" class="btn-back">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>

        <div class="page-header">
            <h2>💰 Payment Receiving Settings</h2>
            <p>Configure where you want to receive payments from your merchants. Add your bank account, UPI ID, crypto wallet, or card details.</p>
        </div>

        <div class="settings-grid">
            <!-- UPI Settings -->
            <div class="settings-card">
                <div class="card-header">
                    <div class="card-icon upi">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <div class="card-title">
                        <h3>UPI Payment</h3>
                        <p>Receive payments via UPI</p>
                    </div>
                </div>

                <div class="saved-details" id="savedUPI" style="display: none;">
                    <h4>✅ Current UPI Details</h4>
                    <div class="detail-item">
                        <span class="detail-label">UPI ID:</span>
                        <span class="detail-value" id="currentUPI">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Name:</span>
                        <span class="detail-value" id="currentUPIName">-</span>
                    </div>
                </div>

                <form onsubmit="saveUPISettings(event)">
                    <div class="form-group">
                        <label>UPI ID *</label>
                        <input type="text" id="upiId" placeholder="yourname@paytm" required>
                    </div>
                    <div class="form-group">
                        <label>Account Holder Name *</label>
                        <input type="text" id="upiName" placeholder="Full name as per bank" required>
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="upiPhone" placeholder="9876543210">
                    </div>
                    <button type="submit" class="btn-save">
                        <i class="fas fa-save"></i> Save UPI Details
                    </button>
                </form>

                <div class="info-box">
                    <i class="fas fa-info-circle"></i>
                    <strong>Note:</strong> Your merchants' payments will be directly sent to this UPI ID. Make sure it's active and verified.
                </div>
            </div>

            <!-- Bank Account Settings -->
            <div class="settings-card">
                <div class="card-header">
                    <div class="card-icon bank">
                        <i class="fas fa-university"></i>
                    </div>
                    <div class="card-title">
                        <h3>Bank Account</h3>
                        <p>Receive payments via bank transfer</p>
                    </div>
                </div>

                <div class="saved-details" id="savedBank" style="display: none;">
                    <h4>✅ Current Bank Details</h4>
                    <div class="detail-item">
                        <span class="detail-label">Account Number:</span>
                        <span class="detail-value" id="currentBankAcc">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">IFSC Code:</span>
                        <span class="detail-value" id="currentIFSC">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Bank Name:</span>
                        <span class="detail-value" id="currentBankName">-</span>
                    </div>
                </div>

                <form onsubmit="saveBankSettings(event)">
                    <div class="form-group">
                        <label>Account Holder Name *</label>
                        <input type="text" id="bankHolderName" placeholder="Full name as per bank" required>
                    </div>
                    <div class="form-group">
                        <label>Account Number *</label>
                        <input type="text" id="bankAccount" placeholder="1234567890" required>
                    </div>
                    <div class="form-group">
                        <label>Confirm Account Number *</label>
                        <input type="text" id="bankAccountConfirm" placeholder="Re-enter account number" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>IFSC Code *</label>
                            <input type="text" id="ifscCode" placeholder="SBIN0001234" required>
                        </div>
                        <div class="form-group">
                            <label>Account Type *</label>
                            <select id="accountType" required>
                                <option value="">Select Type</option>
                                <option value="savings">Savings</option>
                                <option value="current">Current</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Bank Name *</label>
                        <input type="text" id="bankName" placeholder="State Bank of India" required>
                    </div>
                    <div class="form-group">
                        <label>Branch Name</label>
                        <input type="text" id="branchName" placeholder="Mumbai Main Branch">
                    </div>
                    <button type="submit" class="btn-save">
                        <i class="fas fa-save"></i> Save Bank Details
                    </button>
                </form>

                <div class="info-box">
                    <i class="fas fa-shield-alt"></i>
                    <strong>Secure:</strong> Your bank details are encrypted and stored securely. We never share them with anyone.
                </div>
            </div>

            <!-- Crypto Wallet Settings -->
            <div class="settings-card">
                <div class="card-header">
                    <div class="card-icon crypto">
                        <i class="fab fa-bitcoin"></i>
                    </div>
                    <div class="card-title">
                        <h3>Cryptocurrency</h3>
                        <p>Receive payments in crypto</p>
                    </div>
                </div>

                <div class="saved-details" id="savedCrypto" style="display: none;">
                    <h4>✅ Current Crypto Wallets</h4>
                    <div id="cryptoWalletsList"></div>
                </div>

                <form onsubmit="saveCryptoSettings(event)">
                    <div class="form-group">
                        <label>Cryptocurrency *</label>
                        <select id="cryptoType" required>
                            <option value="">Select Crypto</option>
                            <option value="BTC">Bitcoin (BTC)</option>
                            <option value="ETH">Ethereum (ETH)</option>
                            <option value="USDT">Tether (USDT)</option>
                            <option value="USDC">USD Coin (USDC)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Wallet Address *</label>
                        <input type="text" id="walletAddress" placeholder="0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb" required>
                    </div>
                    <div class="form-group">
                        <label>Wallet Label (Optional)</label>
                        <input type="text" id="walletLabel" placeholder="My Main Wallet">
                    </div>
                    <button type="submit" class="btn-save">
                        <i class="fas fa-save"></i> Add Crypto Wallet
                    </button>
                </form>

                <div class="info-box">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Important:</strong> Double-check your wallet address. Crypto transactions are irreversible.
                </div>
            </div>

            <!-- Card/PG Settings -->
            <div class="settings-card">
                <div class="card-header">
                    <div class="card-icon card">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="card-title">
                        <h3>Payment Gateway API</h3>
                        <p>Connect your Razorpay/Paytm account</p>
                    </div>
                </div>

                <div class="saved-details" id="savedPG" style="display: none;">
                    <h4>✅ Current Gateway</h4>
                    <div class="detail-item">
                        <span class="detail-label">Provider:</span>
                        <span class="detail-value" id="currentPGProvider">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Merchant ID:</span>
                        <span class="detail-value" id="currentMerchantID">-</span>
                    </div>
                </div>

                <form onsubmit="savePGSettings(event)">
                    <div class="form-group">
                        <label>Payment Gateway Provider *</label>
                        <select id="pgProvider" required>
                            <option value="">Select Provider</option>
                            <option value="razorpay">Razorpay</option>
                            <option value="paytm">Paytm</option>
                            <option value="phonepe">PhonePe</option>
                            <option value="cashfree">Cashfree</option>
                            <option value="instamojo">Instamojo</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Merchant ID / Key ID *</label>
                        <input type="text" id="merchantId" placeholder="rzp_live_xxxxx" required>
                    </div>
                    <div class="form-group">
                        <label>API Secret Key *</label>
                        <input type="password" id="apiSecret" placeholder="Enter your API secret" required>
                    </div>
                    <div class="form-group">
                        <label>Webhook Secret (Optional)</label>
                        <input type="text" id="webhookSecret" placeholder="whsec_xxxxx">
                    </div>
                    <button type="submit" class="btn-save">
                        <i class="fas fa-save"></i> Save Gateway Details
                    </button>
                </form>

                <div class="info-box">
                    <i class="fas fa-link"></i>
                    <strong>Integration:</strong> Connect your existing payment gateway to receive card/UPI payments directly.
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load saved settings on page load
        window.onload = function() {
            loadSavedSettings();
        };

        function loadSavedSettings() {
            // Load UPI settings
            const upiSettings = JSON.parse(localStorage.getItem('upiSettings') || '{}');
            if (upiSettings.upiId) {
                document.getElementById('savedUPI').style.display = 'block';
                document.getElementById('currentUPI').textContent = upiSettings.upiId;
                document.getElementById('currentUPIName').textContent = upiSettings.name;
                document.getElementById('upiId').value = upiSettings.upiId;
                document.getElementById('upiName').value = upiSettings.name;
                document.getElementById('upiPhone').value = upiSettings.phone || '';
            }

            // Load Bank settings
            const bankSettings = JSON.parse(localStorage.getItem('bankSettings') || '{}');
            if (bankSettings.accountNumber) {
                document.getElementById('savedBank').style.display = 'block';
                document.getElementById('currentBankAcc').textContent = '****' + bankSettings.accountNumber.slice(-4);
                document.getElementById('currentIFSC').textContent = bankSettings.ifscCode;
                document.getElementById('currentBankName').textContent = bankSettings.bankName;
            }

            // Load Crypto settings
            const cryptoSettings = JSON.parse(localStorage.getItem('cryptoSettings') || '[]');
            if (cryptoSettings.length > 0) {
                document.getElementById('savedCrypto').style.display = 'block';
                const walletsList = document.getElementById('cryptoWalletsList');
                walletsList.innerHTML = '';
                cryptoSettings.forEach(wallet => {
                    walletsList.innerHTML += `
                        <div class="detail-item">
                            <span class="detail-label">${wallet.type}:</span>
                            <span class="detail-value">${wallet.address.slice(0, 10)}...${wallet.address.slice(-8)}</span>
                        </div>
                    `;
                });
            }

            // Load PG settings
            const pgSettings = JSON.parse(localStorage.getItem('pgSettings') || '{}');
            if (pgSettings.provider) {
                document.getElementById('savedPG').style.display = 'block';
                document.getElementById('currentPGProvider').textContent = pgSettings.provider.toUpperCase();
                document.getElementById('currentMerchantID').textContent = pgSettings.merchantId;
            }
        }

        function saveUPISettings(event) {
            event.preventDefault();
            
            const upiSettings = {
                upiId: document.getElementById('upiId').value,
                name: document.getElementById('upiName').value,
                phone: document.getElementById('upiPhone').value,
                savedAt: new Date().toISOString()
            };

            localStorage.setItem('upiSettings', JSON.stringify(upiSettings));
            alert('✅ UPI details saved successfully!');
            loadSavedSettings();
        }

        function saveBankSettings(event) {
            event.preventDefault();
            
            const accountNumber = document.getElementById('bankAccount').value;
            const confirmAccount = document.getElementById('bankAccountConfirm').value;

            if (accountNumber !== confirmAccount) {
                alert('❌ Account numbers do not match!');
                return;
            }

            const bankSettings = {
                holderName: document.getElementById('bankHolderName').value,
                accountNumber: accountNumber,
                ifscCode: document.getElementById('ifscCode').value,
                accountType: document.getElementById('accountType').value,
                bankName: document.getElementById('bankName').value,
                branchName: document.getElementById('branchName').value,
                savedAt: new Date().toISOString()
            };

            localStorage.setItem('bankSettings', JSON.stringify(bankSettings));
            alert('✅ Bank details saved successfully!');
            document.getElementById('bankAccountConfirm').value = '';
            loadSavedSettings();
        }

        function saveCryptoSettings(event) {
            event.preventDefault();
            
            const cryptoSettings = JSON.parse(localStorage.getItem('cryptoSettings') || '[]');
            
            const newWallet = {
                type: document.getElementById('cryptoType').value,
                address: document.getElementById('walletAddress').value,
                label: document.getElementById('walletLabel').value,
                savedAt: new Date().toISOString()
            };

            cryptoSettings.push(newWallet);
            localStorage.setItem('cryptoSettings', JSON.stringify(cryptoSettings));
            
            alert('✅ Crypto wallet added successfully!');
            document.getElementById('cryptoType').value = '';
            document.getElementById('walletAddress').value = '';
            document.getElementById('walletLabel').value = '';
            loadSavedSettings();
        }

        function savePGSettings(event) {
            event.preventDefault();
            
            const pgSettings = {
                provider: document.getElementById('pgProvider').value,
                merchantId: document.getElementById('merchantId').value,
                apiSecret: document.getElementById('apiSecret').value,
                webhookSecret: document.getElementById('webhookSecret').value,
                savedAt: new Date().toISOString()
            };

            localStorage.setItem('pgSettings', JSON.stringify(pgSettings));
            alert('✅ Payment gateway details saved successfully!');
            loadSavedSettings();
        }
    </script>
</body>
</html>
