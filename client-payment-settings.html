<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Settings - PayMe 2D Gateway</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/client-common.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/client-common.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 42px;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: transform 0.2s;
        }

        .back-btn:hover {
            transform: translateY(-2px);
        }

        .header p {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 30px;
        }

        .settings-card {
            background: white;
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .settings-card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 3px solid #f0f0f0;
        }

        .card-icon {
            width: 70px;
            height: 70px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .card-icon.upi {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .card-icon.bank {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }

        .card-icon.crypto {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .card-icon.gateway {
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
        }

        .card-title h3 {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .card-title p {
            font-size: 16px;
            color: #6b7280;
        }

        .current-details {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-left: 5px solid #10b981;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .current-details h4 {
            font-size: 16px;
            font-weight: 700;
            color: #065f46;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #d1fae5;
            font-size: 16px;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            color: #047857;
        }

        .detail-value {
            color: #065f46;
            font-weight: 500;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 10px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .submit-btn.upi-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .submit-btn.bank-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }

        .submit-btn.crypto-btn {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .submit-btn.gateway-btn {
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
        }

        .info-box {
            background: #eff6ff;
            border-left: 5px solid #3b82f6;
            padding: 20px;
            border-radius: 12px;
            margin-top: 25px;
        }

        .info-box p {
            font-size: 15px;
            color: #1e40af;
            line-height: 1.6;
        }

        .info-box strong {
            font-weight: 700;
        }

        @media (max-width: 768px) {
            .settings-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 16px;
            }

            .card-title h3 {
                font-size: 16px;
            }

            .header-top {
                flex-direction: column;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-top">
                <h1>💰 Payment Settings</h1>
                <a href="client-dashboard.html" class="back-btn">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </a>
            </div>
            <p>Configure where you want to receive payments from your merchants. Add your bank account, UPI ID, crypto wallet, or payment gateway details for seamless transactions.</p>
        </div>

        <!-- Settings Grid -->
        <div class="settings-grid">
            <!-- UPI Payment Card -->
            <div class="settings-card">
                <div class="card-header">
                    <div class="card-icon upi">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <div class="card-title">
                        <h3>UPI Payment</h3>
                        <p>Receive instant payments via UPI</p>
                    </div>
                </div>

                <div class="current-details" id="currentUPIDetails" style="display: none;">
                    <h4><i class="fas fa-check-circle"></i> Current UPI Details</h4>
                    <div class="detail-item">
                        <span class="detail-label">UPI ID:</span>
                        <span class="detail-value" id="savedUPIId"></span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Name:</span>
                        <span class="detail-value" id="savedUPIName"></span>
                    </div>
                </div>

                <form id="upiForm" onsubmit="saveUPISettings(event)">
                    <div class="form-group">
                        <label>UPI ID *</label>
                        <input type="text" id="upiId" placeholder="yourname@paytm" required>
                    </div>

                    <div class="form-group">
                        <label>Account Holder Name *</label>
                        <input type="text" id="upiName" placeholder="Full name as per bank" required>
                    </div>

                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="upiPhone" placeholder="9876543210">
                    </div>

                    <button type="submit" class="submit-btn upi-btn">
                        <i class="fas fa-save"></i> Save UPI Details
                    </button>

                    <div class="info-box">
                        <p><strong>Note:</strong> Your merchants' payments will be directly sent to this UPI ID. Make sure it's active and verified.</p>
                    </div>
                </form>
            </div>

            <!-- Bank Account Card -->
            <div class="settings-card">
                <div class="card-header">
                    <div class="card-icon bank">
                        <i class="fas fa-university"></i>
                    </div>
                    <div class="card-title">
                        <h3>Bank Account</h3>
                        <p>Receive payments via bank transfer</p>
                    </div>
                </div>

                <div class="current-details" id="currentBankDetails" style="display: none;">
                    <h4><i class="fas fa-check-circle"></i> Current Bank Details</h4>
                    <div class="detail-item">
                        <span class="detail-label">Account Number:</span>
                        <span class="detail-value" id="savedBankAccount"></span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">IFSC Code:</span>
                        <span class="detail-value" id="savedIFSC"></span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Bank Name:</span>
                        <span class="detail-value" id="savedBankName"></span>
                    </div>
                </div>

                <form id="bankForm" onsubmit="saveBankSettings(event)">
                    <div class="form-group">
                        <label>Account Holder Name *</label>
                        <input type="text" id="bankHolderName" placeholder="Full name as per bank" required>
                    </div>

                    <div class="form-group">
                        <label>Account Number *</label>
                        <input type="text" id="bankAccount" placeholder="1234567890123456" required>
                    </div>

                    <div class="form-group">
                        <label>Confirm Account Number *</label>
                        <input type="text" id="confirmBankAccount" placeholder="Re-enter account number" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>IFSC Code *</label>
                            <input type="text" id="ifscCode" placeholder="SBIN0001234" required>
                        </div>

                        <div class="form-group">
                            <label>Account Type *</label>
                            <select id="accountType" required>
                                <option value="">Select Type</option>
                                <option value="Savings">Savings</option>
                                <option value="Current">Current</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Bank Name *</label>
                        <input type="text" id="bankName" placeholder="State Bank of India" required>
                    </div>

                    <div class="form-group">
                        <label>Branch Name</label>
                        <input type="text" id="branchName" placeholder="Mumbai Main Branch">
                    </div>

                    <button type="submit" class="submit-btn bank-btn">
                        <i class="fas fa-save"></i> Save Bank Details
                    </button>

                    <div class="info-box">
                        <p><strong>Secure:</strong> Your bank details are encrypted and stored securely. We never share them with anyone.</p>
                    </div>
                </form>
            </div>

            <!-- Cryptocurrency Card -->
            <div class="settings-card">
                <div class="card-header">
                    <div class="card-icon crypto">
                        <i class="fab fa-bitcoin"></i>
                    </div>
                    <div class="card-title">
                        <h3>Cryptocurrency</h3>
                        <p>Receive payments in crypto</p>
                    </div>
                </div>

                <form id="cryptoForm" onsubmit="saveCryptoSettings(event)">
                    <div class="form-group">
                        <label>Cryptocurrency *</label>
                        <select id="cryptoType" required>
                            <option value="">Select Crypto</option>
                            <option value="Bitcoin (BTC)">Bitcoin (BTC)</option>
                            <option value="Ethereum (ETH)">Ethereum (ETH)</option>
                            <option value="Tether (USDT)">Tether (USDT)</option>
                            <option value="USD Coin (USDC)">USD Coin (USDC)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Wallet Address *</label>
                        <input type="text" id="walletAddress" placeholder="0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb" required>
                    </div>

                    <div class="form-group">
                        <label>Wallet Label (Optional)</label>
                        <input type="text" id="walletLabel" placeholder="My Business Wallet">
                    </div>

                    <button type="submit" class="submit-btn crypto-btn">
                        <i class="fas fa-plus"></i> Add Crypto Wallet
                    </button>

                    <div class="info-box" style="background: #fef3c7; border-left-color: #f59e0b;">
                        <p style="color: #92400e;"><strong>Important:</strong> Double-check your wallet address. Crypto transactions are irreversible.</p>
                    </div>
                </form>
            </div>

            <!-- Payment Gateway API Card -->
            <div class="settings-card">
                <div class="card-header">
                    <div class="card-icon gateway">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="card-title">
                        <h3>Payment Gateway API</h3>
                        <p>Connect your Razorpay/Paytm account</p>
                    </div>
                </div>

                <form id="gatewayForm" onsubmit="saveGatewaySettings(event)">
                    <div class="form-group">
                        <label>Payment Gateway Provider *</label>
                        <select id="gatewayProvider" required>
                            <option value="">Select Provider</option>
                            <option value="Razorpay">Razorpay</option>
                            <option value="Paytm">Paytm</option>
                            <option value="PhonePe">PhonePe</option>
                            <option value="Cashfree">Cashfree</option>
                            <option value="Instamojo">Instamojo</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Merchant ID / Key ID *</label>
                        <input type="text" id="merchantId" placeholder="rzp_live_abc123xyz" required>
                    </div>

                    <div class="form-group">
                        <label>API Secret Key *</label>
                        <input type="password" id="apiSecret" placeholder="sk_live_xyz789abc" required>
                    </div>

                    <div class="form-group">
                        <label>Webhook Secret (Optional)</label>
                        <input type="password" id="webhookSecret" placeholder="whsec_abc123xyz">
                    </div>

                    <button type="submit" class="submit-btn gateway-btn">
                        <i class="fas fa-link"></i> Save Gateway Details
                    </button>

                    <div class="info-box" style="background: #f3e8ff; border-left-color: #8b5cf6;">
                        <p style="color: #5b21b6;"><strong>Integration:</strong> Connect your existing payment gateway to receive card/UPI payments directly.</p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Load saved settings on page load
        window.onload = function() {
            loadSavedSettings();
        };

        function loadSavedSettings() {
            // Load UPI settings
            const upiSettings = JSON.parse(localStorage.getItem('upiSettings') || '{}');
            if (upiSettings.upiId) {
                document.getElementById('currentUPIDetails').style.display = 'block';
                document.getElementById('savedUPIId').textContent = upiSettings.upiId;
                document.getElementById('savedUPIName').textContent = upiSettings.name;
                document.getElementById('upiId').value = upiSettings.upiId;
                document.getElementById('upiName').value = upiSettings.name;
                document.getElementById('upiPhone').value = upiSettings.phone || '';
            }

            // Load Bank settings
            const bankSettings = JSON.parse(localStorage.getItem('bankSettings') || '{}');
            if (bankSettings.accountNumber) {
                document.getElementById('currentBankDetails').style.display = 'block';
                const maskedAccount = '****' + bankSettings.accountNumber.slice(-4);
                document.getElementById('savedBankAccount').textContent = maskedAccount;
                document.getElementById('savedIFSC').textContent = bankSettings.ifscCode;
                document.getElementById('savedBankName').textContent = bankSettings.bankName;
            }
        }

        function saveUPISettings(event) {
            event.preventDefault();
            
            const upiSettings = {
                upiId: document.getElementById('upiId').value,
                name: document.getElementById('upiName').value,
                phone: document.getElementById('upiPhone').value,
                savedAt: new Date().toISOString()
            };

            localStorage.setItem('upiSettings', JSON.stringify(upiSettings));
            alert('✅ UPI details saved successfully!');
            loadSavedSettings();
        }

        function saveBankSettings(event) {
            event.preventDefault();
            
            const accountNumber = document.getElementById('bankAccount').value;
            const confirmAccount = document.getElementById('confirmBankAccount').value;

            if (accountNumber !== confirmAccount) {
                alert('❌ Account numbers do not match!');
                return;
            }

            const bankSettings = {
                holderName: document.getElementById('bankHolderName').value,
                accountNumber: accountNumber,
                ifscCode: document.getElementById('ifscCode').value,
                accountType: document.getElementById('accountType').value,
                bankName: document.getElementById('bankName').value,
                branchName: document.getElementById('branchName').value,
                savedAt: new Date().toISOString()
            };

            localStorage.setItem('bankSettings', JSON.stringify(bankSettings));
            alert('✅ Bank details saved successfully!');
            document.getElementById('confirmBankAccount').value = '';
            loadSavedSettings();
        }

        function saveCryptoSettings(event) {
            event.preventDefault();
            
            const cryptoSettings = {
                type: document.getElementById('cryptoType').value,
                address: document.getElementById('walletAddress').value,
                label: document.getElementById('walletLabel').value,
                savedAt: new Date().toISOString()
            };

            // Get existing crypto wallets
            const cryptoWallets = JSON.parse(localStorage.getItem('cryptoWallets') || '[]');
            cryptoWallets.push(cryptoSettings);
            localStorage.setItem('cryptoWallets', JSON.stringify(cryptoWallets));

            alert('✅ Crypto wallet added successfully!');
            document.getElementById('cryptoForm').reset();
        }

        function saveGatewaySettings(event) {
            event.preventDefault();
            
            const gatewaySettings = {
                provider: document.getElementById('gatewayProvider').value,
                merchantId: document.getElementById('merchantId').value,
                apiSecret: document.getElementById('apiSecret').value,
                webhookSecret: document.getElementById('webhookSecret').value,
                savedAt: new Date().toISOString()
            };

            localStorage.setItem('gatewaySettings', JSON.stringify(gatewaySettings));
            alert('✅ Payment gateway details saved successfully!');
        }
    </script>
</body>
</html>
